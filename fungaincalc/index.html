<!DOCTYPE html>
<html lang="ja">
<head prefix="og:http://ogp.me/ns#">

<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=500,maximum-scale=0.8,user-scalable=no" />
<meta name="description" content="デレステ用の計算ツール。獲得ファン数→スコア・スコア→獲得ファン数を計算できます。" />
<meta name="keywords" content="デレステ,ファン数調整,獲得ファン数" />
<meta name="author" content="chieri0611" />
<!-- update: 2025-09-20 -->

<meta name="og:type" content="article" />
<meta name="og:url" content="https://chieri0611.github.io/imascgstage/fungaincalc/" />
<meta name="og:title" content="デレステ 獲得ファン数計算機" />
<meta name="og:description" content="獲得ファン数→スコア・スコア→獲得ファン数を計算" />
<meta name="og:image" content="https://chieri0611.github.io/imascgstage/summary_image.jpg" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@m_chieri795780" />
<meta name="twitter:title" content="デレステ 獲得ファン数計算機" />
<meta name="twitter:description" content="獲得ファン数→スコア・スコア→獲得ファン数を計算" />
<meta name="twitter:image" content="https://chieri0611.github.io/imascgstage/summary_image.jpg" />

<title>デレステ 獲得ファン数計算機</title>

<link rel="apple-touch-icon" href="https://chieri0611.github.io/imascgstage/apple-touch-icon.png" sizes="180x180" />
<link rel="icon" type="image/png" href="https://chieri0611.github.io/imascgstage/android-touch-icon.png" sizes="192x192" />

<!-- -------------------------------------------------------------------------------- -->

<link rel="stylesheet" type="text/css" href="../style.css" />
<style tyle="text/css">
/* ========== Common Style(stand-alone) ========== */
</style>


<style tyle="text/css">
/* ==================== Layout ==================== */
.switch_button#calctype {text-align: center; }
.switch_button#calctype > label { width: 200px; }

#form_fun, #form_score { text-align: center; }

input#min_fun, input#max_fun { width: 100px; }
input#score { width: 200px; }

#stamina > .radiobutton { width: 100px; }

.button#cancel, .button#exec { width: 130px; }
</style>

<!-- -------------------------------------------------------------------------------- -->

<script type="text/javascript" src="../../common.js" charset="UTF-8"></script>

<script type="text/javascript">
// ======================= Common Script =======================

/* $elem
  -------------------------------------------------- */
function $elem(selectors, parent) {
  var parent_elem = parent != null ? parent : document;
  return parent_elem.querySelector(selectors);
}

</script>


<script type="text/javascript">
// ==================== FanGainCalc Script ====================

// ----- 計算種類の変更 ---------------
function changeCalcType(elem) {
    if(!elem.checked) return;
    toggleClass($elem("#form_fun"), "hidden", elem.id != "fun-to-score");
    toggleClass($elem("#form_score"), "hidden", elem.id != "score-to-fun");
}


// ----- 入力内容をリセット ---------------
function resetForm() {
    $elem("#min_fun").value = "";
    $elem("#max_fun").value = "";
    $elem("#score").value = "";
    $elem("#roomitem").selectedIndex = 0;
    $elem("#produceplan").selectedIndex = 0;
    $elem("#campaign").selectedIndex = 0;
    $elem("#center").selectedIndex = 0;
    $elem("#guest").selectedIndex = 0;
    $elem("#stamina_1").checked = true;
    $elem("#premium_pass").checked = false;
    $elem("#calc_result").innerHTML = "";
    toggleClass($elem("#just_err"), "hidden", true);
}


// ----- 計算実行関数 ---------------
function execCalc() {
    var temp_val;

    // 入力値取得
    var calctype = getRadioValue("calctype");

    // エラーチェック
    switch(calctype) {
        case "fun-to-score":
            var min_fun = $elem("#min_fun").value;
            var max_fun = $elem("#max_fun").value;

            if(min_fun == "" && max_fun != "") min_fun = max_fun;
            if(min_fun != "" && max_fun == "") max_fun = min_fun;

            min_fun = Number(min_fun); max_fun = Number(max_fun);
            if(min_fun == 0 && max_fun == 0) return;
            if(!Number.isInteger(min_fun) || !Number.isInteger(max_fun)) {
                alert('ファン数が正しく入力されていません。'); return;
            }
            if(min_fun > max_fun) {
                temp_val = max_fun; max_fun = min_fun; min_fun = temp_val;
            }
            break;

        case "score-to-fun":
            var score = Number($elem("#score").value);
            if(score == 0) return;
            if(!Number.isInteger(score)) {
                alert('スコアが正しく入力されていません。'); return;
            }
            break;
    }

    // パラメータ
    var param = {
        roomitem: 0,
        produceplan: 0,
        campaign: 1,
        center: 0,
        guest: 0,
        stamina: 1,
        premium_pass: 1,
        livemode: "normal"
    };


    // パラメータ値取得: ルームアイテム
    if($elem("#roomitem").value != "none") {
        param.roomitem = Number($elem("#roomitem").value);
    }

    // パラメータ値取得: プロデュース方針
    if($elem("#produceplan").value != "none") {
        param.produceplan = Number($elem("#produceplan").value);
    }

    // パラメータ値取得: キャンペーン効果
    switch($elem("#campaign").value) {
        case "2": param.campaign = 2; break;
    }

    // パラメータ値取得: センター効果
    switch($elem("#center").value) {
        case "sr_cutecross": param.center= 0.08; break;
        case "ssr_cutecross": param.center = 0.1; break;
        case "sr_charm": param.center = 0.32; break;
        case "ssr_charm": param.center = 0.4; break;
        case "star_charm": param.center = 0.55; break;
    }

    // パラメータ値取得: ゲストセンター効果
    switch($elem("#guest").value) {
        case "sr_cutecross": param.guest= 0.08; break;
        case "ssr_cutecross": param.guest = 0.1; break;
        case "sr_charm": param.guest = 0.32; break;
        case "ssr_charm": param.guest = 0.4; break;
        case "star_charm": param.guest = 0.55; break;
    }

    // パラメータ値取得: スタミナ消費量
    param.stamina = Number(getRadioValue("stamina"));

    // パラメータ値取得: プレミアムパス
    if($elem("#premium_pass").checked) param.premium_pass = 2;



    switch(calctype) {
        //スコア→ファン数計算
        case "score-to-fun":
            var fungain = score_to_fun(score, param);

            $elem("#calc_result").innerHTML = "獲得ファン数: " + fungain.toLocaleString() + "人";
            toggleClass($elem("#just_err"), "hidden", true);
            break;


        //ファン数→スコア計算
        case "fun-to-score":
            var calc_val = fun_to_score(min_fun, max_fun, param);

            var result_elemcode = "スコア: " + calc_val.min_score.toString();
            result_elemcode += '<span class="small_text">（' + calc_val.min_fungain.toLocaleString() + '人）</span>';
            result_elemcode += " ～ ";
            result_elemcode += calc_val.max_score.toString();
            result_elemcode += '<span class="small_text">（' + calc_val.max_fungain.toLocaleString() + '人）</span>';

            $elem("#calc_result").innerHTML = result_elemcode;
            toggleClass($elem("#just_err"), "hidden", calc_val.just);
            break;
    }


    window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
}


/*
ファン数計算式
ceil(
  ceil(
    ceil(
      score * 0.001 * (1 + roomitem + center)
    )
    * campaign
    * produceplan
    * stamina
  )
  * premium_pass
)
*/
// ----- スコア→獲得ファン数計算 ---------------
function score_to_fun(score, param) {
    var bonus = Decimal.plus(Decimal.plus(Decimal.plus(1, param.roomitem), param.center), param.guest);
    var fungain = Decimal.times(score, 0.001);
    fungain = Math.ceil(Decimal.times(fungain, bonus));

    fungain = fungain * param.campaign;
    fungain = fungain * param.stamina;
    bonus = Decimal.plus(1, param.produceplan);
    fungain = Math.ceil(Decimal.times(fungain, bonus));

    fungain = Math.ceil(Decimal.times(fungain, param.premium_pass));

    return fungain;
}


// ----- ファン数→必要スコア計算 ---------------
function fun_to_score(min_fun, max_fun, param) {
    var temp_val;

    if(min_fun > max_fun) {
        temp_val = max_fun; max_fun = min_fun; min_fun = temp_val;
    }

    var calc_val = {
        min_score: 0,
        min_fungain: 0,
        max_score: 0,
        max_fungain: 0,
        just: false
    }

    const plan = Decimal.plus(1, param.produceplan);
    const bonus = Decimal.plus(Decimal.plus(Decimal.plus(1, param.roomitem), param.center), param.guest);


    var max_score = Math.floor(Decimal.div(max_fun, param.premium_pass));
    max_score = Decimal.div(max_score, plan);
    max_score = Math.floor(Decimal.div(max_score, param.stamina));
    max_score = Math.floor(Decimal.div(max_score, param.campaign));
    max_score = Decimal.div(max_score, bonus);
    max_score = Math.floor(Decimal.times(max_score, 1000));
    var fungain = score_to_fun(max_score, param);


    //max_fun超えるならscore減らす =max_funになったscoreがmax_score
    //max_funと同じ・少ないならscore増やす max_fun超えたらscore-1がmax_score
    if(max_fun < fungain) {
        do {
            max_score--; fungain = score_to_fun(max_score, param);
        } while(max_fun < fungain);
    } else {
        do {
            max_score++; fungain = score_to_fun(max_score, param);
        } while(max_fun >= fungain);
        max_score--;
    }


    var min_score = Math.floor(Decimal.div(min_fun - 1, param.stamina));
    min_score = Math.floor(Decimal.div(min_score, param.premium_pass));
    min_score = Decimal.div(min_score, plan);
    min_score = Math.floor(Decimal.div(min_score, param.campaign));
    min_score = Decimal.div(min_score, bonus);
    min_score = Math.floor(Decimal.times(min_score, 1000));
    fungain = score_to_fun(min_score, param);


    //min_funより少ないならscore増やす =min_funになったscoreがmin_score
    //min_funと同じ・多いならscore減らす min_funより少なくなったscore+1がmin_score
    if(min_fun > fungain) {
        do {
            min_score++; fungain = score_to_fun(min_score, param);
        } while(min_fun > fungain);
    } else {
        do {
            min_score--; fungain = score_to_fun(min_score, param);
        } while(min_fun <= fungain);
        min_score++;
    }


    if(min_score > max_score) {
        calc_val.min_score = max_score;
        calc_val.max_score = min_score;
    } else {
        calc_val.min_score = min_score;
        calc_val.max_score = max_score;
    }

    calc_val.min_fungain = score_to_fun(calc_val.min_score, param);
    calc_val.max_fungain = score_to_fun(calc_val.max_score, param);
    calc_val.just = (min_fun == max_fun && min_fun == calc_val.min_fungain && max_fun == calc_val.max_fungain);


    return calc_val;
}

</script>

<!-- -------------------------------------------------------------------------------- -->

</head>
<body class="theme_dialog">
<header><div class="title">デレステ 獲得ファン数計算機</div></header>

<div class="content">
  <a class="back_button" href="../"></a>

  <div id="calctype" class="switch_button">
    <input type="radio" name="calctype" id="fun-to-score" value="fun-to-score" checked="checked" onchange="changeCalcType(this)" />
    <label for="fun-to-score">ファン数→スコア</label>
    <input type="radio" name="calctype" id="score-to-fun" value="score-to-fun" onchange="changeCalcType(this)" />
    <label for="score-to-fun">スコア→ファン数</label>
  </div>

  <div id="form_fun" class="content_block">
    <h1>獲得したいファン数（1人あたり）</h1>
    <input id="min_fun" type="number" min="0" value="" spellcheck="false" />
    <div class="text_range">～</div>
    <input id="max_fun" type="number" min="0" value="" spellcheck="false" />
  </div>

  <div id="form_score" class="content_block hidden">
    <h1>スコア</h1>
    <input id="score" type="number" min="0" value="" spellcheck="false" />
  </div>

  <div class="content_block">
    <h1>獲得ファン数アップ効果</h1>
    <div class="listbox">
      <label>ルームアイテム</label>
      <div class="listbox_frame" onclick="showListDialog(this)"><select id="roomitem">
        <option value="none">効果なし</option>
        <option value="0.01">Lv1（1%UP）</option>
        <option value="0.02">Lv2（2%UP）</option>
        <option value="0.03">Lv3（3%UP）</option>
        <option value="0.04">Lv4（4%UP）</option>
        <option value="0.05">Lv5（5%UP）</option>
        <option value="0.06">Lv6（6%UP）</option>
        <option value="0.07">Lv7（7%UP）</option>
        <option value="0.08">Lv8（8%UP）</option>
        <option value="0.09">Lv9（9%UP）</option>
        <option value="0.1">Lv10（10%UP）</option>
      </select></div>
    </div>

    <div class="listbox">
      <label>プロデュース方針</label>
      <div class="listbox_frame" onclick="showListDialog(this)"><select id="produceplan">
        <option value="none">効果なし</option>
        <option value="0.08">Lv1（8%UP）</option>
        <option value="0.16">Lv2（16%UP）</option>
        <option value="0.24">Lv3（24%UP）</option>
        <option value="0.32">Lv4（32%UP）</option>
        <option value="0.42">Lv5（42%UP）</option>
        <option value="0.52">Lv6（52%UP）</option>
        <option value="0.64">Lv7（64%UP）</option>
        <option value="0.76">Lv8（76%UP）</option>
        <option value="0.88">Lv9（88%UP）</option>
        <option value="1">Lv10（100%UP）</option>
      </select></div>
    </div>

    <div class="listbox">
      <label>キャンペーン効果</label>
      <div class="listbox_frame" onclick="showListDialog(this)"><select id="campaign">
        <option value="none">効果なし</option>
        <option value="2">ファン数2倍</option>
      </select></div>
    </div>

    <div class="listbox">
      <label>センター効果</label>
      <div class="listbox_frame" onclick="showListDialog(this)"><select id="center">
        <option value="none">効果なし</option>
        <option value="sr_cutecross">SRキュートクロス（8%UP）</option>
        <option value="ssr_cutecross">SSRキュートクロス（10%UP）</option>
        <option value="sr_charm">SRチャーム（32%UP）</option>
        <option value="ssr_charm">SSRチャーム（40%UP）</option>
        <option value="star_charm">スターライトチャーム（55%UP）</option>
      </select></div>
    </div>

    <div class="listbox">
      <label>ゲストセンター効果</label>
      <div class="listbox_frame" onclick="showListDialog(this)"><select id="guest">
        <option value="none">効果なし</option>
        <option value="sr_cutecross">SRキュートクロス（8%UP）</option>
        <option value="ssr_cutecross">SSRキュートクロス（10%UP）</option>
        <option value="sr_charm">SRチャーム（32%UP）</option>
        <option value="ssr_charm">SSRチャーム（40%UP）</option>
        <option value="star_charm">スターライトチャーム（55%UP）</option>
      </select></div>
    </div>

    <div class="caution">シンデレラブレス使用時、センター効果はゲスト含めて最大値のみ適用</div>
  </div>

  <div id="stamina" class="content_block">
    <h1>スタミナ消費量</h1>
    <div class="radiobutton">
      <input type="radio" name="stamina" id="stamina_1" value="1" checked="checked"/><label for="stamina_1">１倍</label>
    </div>
    <div class="radiobutton">
      <input type="radio" name="stamina" id="stamina_2" value="2" /><label for="stamina_2">２倍</label>
    </div>
    <div class="radiobutton">
      <input type="radio" name="stamina" id="stamina_4" value="4" /><label for="stamina_4">４倍</label>
    </div>
    <div class="radiobutton">
      <input type="radio" name="stamina" id="stamina_8" value="8" /><label for="stamina_8">８倍</label>
    </div>
  </div>

  <div class="content_block">
    <h1>プレミアムパス</h1>
    <div class="checkbox"><input type="checkbox" id="premium_pass" /><label for="premium_pass">プレミアムパス契約（100%UP）</label></div>
  </div>

  <div class="content_block">
    <h1>計算結果</h1>
    <div id="calc_result" class="calc_result"></div>
    <div id="just_err" class="caution hidden">入力したファン数と同数のファン数を獲得できるスコアがありません</div>
  </div>

</div>

<footer>
  <button id="cancel" onclick="resetForm()">リセット</button>
  <button id="exec" class="exec_button" onclick="execCalc()">計算</button>
</footer>

</body>
</html>